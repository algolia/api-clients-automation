get:
  tags:
    - Advanced
  operationId: getLogs
  description: >
    The request must be authenticated by an API key with the [`logs` ACL](https://www.algolia.com/doc/guides/security/api-keys/#access-control-list-acl) enabled.

    Logs are held for the last seven days. There's also a logging limit of 1,000 API calls per server.

    This request counts towards your [operations quota](https://support.algolia.com/hc/en-us/articles/4406981829777-How-does-Algolia-count-records-and-operations-) but doesn't appear in the logs itself.

    > **Note**: To fetch the logs for a Distributed Search Network (DSN) cluster, target the [DSN's endpoint](https://www.algolia.com/doc/guides/scaling/distributed-search-network-dsn/#accessing-dsn-servers).
  summary: Return the latest log entries.
  parameters:
    - name: offset
      in: query
      description: First log entry to retrieve. Sorted by decreasing date with 0 being the most recent.
      schema:
        type: integer
        default: 0
    - name: length
      in: query
      description: Maximum number of entries to retrieve.
      schema:
        type: integer
        default: 10
        maximum: 1000
    - name: indexName
      in: query
      description: Index for which log entries should be retrieved. When omitted, log entries are retrieved for all indices.
      schema:
        type: string
        nullable: true
    - name: type
      in: query
      description: Type of log entries to retrieve. When omitted, all log entries are retrieved.
      schema:
        $ref: '../../common/enums.yml#/logType'
  responses:
    '200':
      description: OK
      content:
        application/json:
          schema:
            title: getLogsResponse
            type: object
            additionalProperties: false
            required:
              - logs
            properties:
              logs:
                type: array
                items:
                  title: log
                  type: object
                  properties:
                    timestamp:
                      type: string
                      description: Timestamp in [ISO 8601](https://wikipedia.org/wiki/ISO_8601) format.
                    method:
                      type: string
                      description: HTTP method of the performed request.
                    answer_code:
                      type: string
                      description: HTTP response code.
                    query_body:
                      type: string
                      description: Request body. Truncated after 1,000 characters.
                    answer:
                      type: string
                      description: Answer body. Truncated after 1,000 characters.
                    url:
                      type: string
                      description: Request URL.
                    ip:
                      type: string
                      description: IP address of the client that performed the request.
                    query_headers:
                      type: string
                      description: Request headers (API key is obfuscated).
                    sha1:
                      type: string
                      description: SHA1 signature of the log entry.
                    nb_api_calls:
                      type: string
                      description: Number of API calls.
                    processing_time_ms:
                      type: string
                      description: Processing time for the query. Doesn't include network time.
                    index:
                      type: string
                      description: Index targeted by the query.
                    query_params:
                      type: string
                      description: Query parameters sent with the request.
                    query_nb_hits:
                      type: string
                      description: Number of hits returned for the query.
                    inner_queries:
                      type: array
                      description: Performed queries for the given request.
                      items:
                        type: object
                        title: logQuery
                        properties:
                          index_name:
                            type: string
                            description: Index targeted by the query.
                          user_token:
                            type: string
                            description: User identifier.
                          query_id:
                            type: string
                            description: Unique query identifier.
                  required:
                    - timestamp
                    - method
                    - answer_code
                    - query_body
                    - answer
                    - url
                    - ip
                    - query_headers
                    - sha1
                    - nb_api_calls
                    - processing_time_ms
    '400':
      $ref: '../../../common/responses/BadRequest.yml'
    '402':
      $ref: '../../../common/responses/FeatureNotEnabled.yml'
    '403':
      $ref: '../../../common/responses/MethodNotAllowed.yml'
    '404':
      $ref: '../../../common/responses/IndexNotFound.yml'
