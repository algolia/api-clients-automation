hit:
  type: object
  description: |
    Search result.

    A hit is a record from your index, augmented with special attributes for highlighting, snippeting, and ranking.
  x-is-generic: true
  additionalProperties: true
  required:
    - objectID
  properties:
    objectID:
      $ref: '../../../../common/parameters.yml#/objectID'
    _highlightResult:
      $ref: '../../../../common/schemas/HighlightResult.yml#/highlightResultMap'
    _snippetResult:
      $ref: '../../../../common/schemas/SnippetResult.yml#/snippetResultMap'
    _rankingInfo:
      $ref: '#/rankingInfo'
    _distinctSeqID:
      $ref: '../../../../common/schemas/Hit.yml#/distinctSeqID'
    _extra:
      $ref: '#/hitMetadata'

hitMetadata:
  type: object
  description: An object that contains the extra key-value pairs provided in the injectedItem definition.
  additionalProperties: true
  properties:
    _injectedItemKey:
      type: string
      description: The key of the injectedItem that inserted this metadata.

rankingInfo:
  allOf:
    - $ref: '../../../../common/schemas/Hit.yml#/rankingInfo'
    - $ref: '#/compositionRankingInfo'

compositionRankingInfo:
  type: object
  additionalProperties: false
  properties:
    composed:
      title: composedRankingInfo
      type: object
      additionalProperties:
        title: compositionIdRankingInfo
        x-additionalPropertiesName: composition-id
        type: object
        properties:
          index:
            type: string
            example: 'products'
          injectedItemKey:
            type: string
            example: 'sponsored-products'
        required:
          - index
          - injectedItemKey
      example:
        'my-composition-to-sponsor-products': {index: 'products', injectedItemKey: 'sponsored-products'}
