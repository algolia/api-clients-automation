GetCrawlerResponse:
  title: API response for retrieving crawler information
  oneOf:
    - $ref: '#/BaseResponse'
    - $ref: '#/WithConfiguration'

BaseResponse:
  title: Without configuration
  type: object
  properties:
    name:
      $ref: '../parameters.yml#/CrawlerName'
    createdAt:
      type: string
      description: Timestamp in ISO 8601 format when the crawler was created.
      example: 2024-04-02T12:17:22Z
    updatedAt:
      type: string
      description: Timestamp in ISO 8601 format when the crawler was last updated.
      example: 2024-04-02T12:17:22Z
    running:
      type: boolean
      description: Whether this crawler is active.
    reindexing:
      type: boolean
      description: Whether this crawler is currently completely reindexing your content.
    blocked:
      type: boolean
      description: |
        Whether this crawler is currently blocked.

        If true, you need to unblock this crawler in the [Crawler dashboard](https://crawler.algolia.com/admin/) or by [cancelling the blocking task](#tag/tasks/operation/cancelBlockingAction).
    blockingError:
      type: string
      description: Reason why the crawler is blocked.
      example: |
        Error: Failed to fetch external data for source 'testCSV': 404
    blockingTaskId:
      type: string
      description: ID of the task that's blocking the crawler.
    lastReindexStartAt:
      default: null
      oneOf:
        - type: string
          description: Timestamp in ISO 8601 format when the last complete reindexing started.
        - type: 'null'
    lastReindexEndedAt:
      default: null
      oneOf:
        - type: string
          description: Timestamp in ISO 8601 format when the last complete reindexing completed.
        - type: 'null'
  required:
    - name
    - createdAt
    - updatedAt
    - running
    - reindexing
    - blocked
    - lastReindexStartAt
    - lastReindexEndedAt

WithConfiguration:
  title: With configuration
  allOf:
    - $ref: '#/BaseResponse'
    - type: object
      properties:
        config:
          $ref: './configuration.yml#/Configuration'
  required:
    - name
    - createdAt
    - updatedAt
    - running
    - reindexing
    - blocked
    - lastReindexStartAt
    - lastReindexEndedAt
    - config
