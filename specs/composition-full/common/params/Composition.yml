enableABTest:
  type: boolean
  description: |
    Whether to enable index level A/B testing for this run request.
    If the composition mixes multiple indices, the A/B test is ignored.
  default: true
  x-categories:
    - Advanced

enableRules:
  type: boolean
  description: Whether to enable composition rules.
  default: true

getRankingInfo:
  type: boolean
  description: Whether the run response should include detailed ranking information.

ruleContexts:
  type: array
  items:
    type: string
  description: |
    Assigns a rule context to the run query
    [Rule contexts](https://www.algolia.com/doc/guides/managing-results/rules/rules-overview/how-to/customize-search-results-by-platform/#whats-a-context) are strings that you can use to trigger matching rules.
  default: []
  example: [mobile]
  x-categories:
    - Rules

injectedItems:
  type: array
  items:
    $ref: '#/externalInjectedItem'
  description: |
    A list of injected objectIDs into an external source.
  default: []
  example:
    [{'objectID': 'my-object-1', 'metadata': {'my-field': 'my-value'}}]
  x-categories:
    - Advanced

externalInjectedItem:
  type: object
  properties:
    objectID:
      type: string
    metadata:
      type: object
      additionalProperties: true
      description: |
        User-defined key-values that will be added to the injected item in the response.
        This is identical to Hits metadata defined in Composition or Composition Rule,
        with the benefit of being set at runtime.
      example: {'my-field': 'my-value'}
  required:
    - objectID
  description: |
    An objectID injected into an external source.
  example: {'objectID': 'my-object-1', 'metadata': {'my-field': 'my-value'}}

