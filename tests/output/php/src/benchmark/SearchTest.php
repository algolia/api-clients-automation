<?php

// Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be lost - read more on https://github.com/algolia/api-clients-automation. DO NOT EDIT.

namespace Algolia\AlgoliaSearch\Test\Benchmark;

use Algolia\AlgoliaSearch\Api\SearchClient;
use Algolia\AlgoliaSearch\Configuration\SearchConfig;
use PHPUnit\Framework\Attributes\CoversClass;
use PHPUnit\Framework\Attributes\TestDox;
use PHPUnit\Framework\TestCase;

/**
 * Benchmark for SearchClient.
 *
 * @internal
 */
#[CoversClass(SearchClient::class)]
class SearchTest extends TestCase
{
    #[TestDox('benchmark the search method')]
    public function test0benchmark(): void
    {
        $client = SearchClient::createWithConfig(SearchConfig::create('test-app-id', 'test-api-key')->setFullHosts(['http://'.('true' == getenv('CI') ? 'localhost' : 'host.docker.internal').':6682']));

        for ($i = 1; $i <= 2000; ++$i) {
            $res = $client->search(
                ['requests' => [
                    ['indexName' => 'cts_e2e_benchmark_search_php',
                        'query' => 'iphone 15 pro max 512gb',
                        'hitsPerPage' => 50,
                    ],
                ],
                ],
            );
        }
    }
}
