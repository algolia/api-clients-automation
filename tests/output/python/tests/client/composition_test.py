# Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be lost - read more on https://github.com/algolia/api-clients-automation. DO NOT EDIT.

from algoliasearch.http.transporter import EchoTransporter
from algoliasearch.http.transporter_sync import EchoTransporterSync
from algoliasearch.composition.client import CompositionClient
from algoliasearch.composition.client import CompositionClientSync
from algoliasearch.composition.config import CompositionConfig


class TestCompositionClient:
    def create_client(self) -> CompositionClient:
        _config = CompositionConfig("appId", "apiKey")
        return CompositionClient.create_with_config(
            config=_config, transporter=EchoTransporter(_config)
        )

    async def test_api_0(self):
        """
        calls api with correct read host
        """

        _config = CompositionConfig("test-app-id", "test-api-key")
        _client = CompositionClient.create_with_config(
            config=_config, transporter=EchoTransporter(_config)
        )
        _req = await _client.search_with_http_info(
            composition_id="test-composition-id",
            request_body={},
        )
        assert _req.host == "test-app-id-dsn.algolia.net"

    async def test_api_1(self):
        """
        calls api with correct write host
        """

        _config = CompositionConfig("test-app-id", "test-api-key")
        _client = CompositionClient.create_with_config(
            config=_config, transporter=EchoTransporter(_config)
        )
        _req = await _client.search_with_http_info(
            composition_id="test-composition-id",
            request_body={},
        )
        assert _req.host == "test-app-id-dsn.algolia.net"


class TestCompositionClientSync:
    def create_client(self) -> CompositionClientSync:
        _config = CompositionConfig("appId", "apiKey")
        return CompositionClientSync.create_with_config(
            config=_config, transporter=EchoTransporterSync(_config)
        )

    def test_api_0(self):
        """
        calls api with correct read host
        """

        _config = CompositionConfig("test-app-id", "test-api-key")
        _client = CompositionClientSync.create_with_config(
            config=_config, transporter=EchoTransporterSync(_config)
        )
        _req = _client.search_with_http_info(
            composition_id="test-composition-id",
            request_body={},
        )
        assert _req.host == "test-app-id-dsn.algolia.net"

    def test_api_1(self):
        """
        calls api with correct write host
        """

        _config = CompositionConfig("test-app-id", "test-api-key")
        _client = CompositionClientSync.create_with_config(
            config=_config, transporter=EchoTransporterSync(_config)
        )
        _req = _client.search_with_http_info(
            composition_id="test-composition-id",
            request_body={},
        )
        assert _req.host == "test-app-id-dsn.algolia.net"
