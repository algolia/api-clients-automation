# Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be lost - read more on https://github.com/algolia/api-clients-automation. DO NOT EDIT.
require "algolia"
require "test/unit"
require "dotenv"

require_relative "../helpers"

Dotenv.load("../../.env")

class TestAnalyticsClientE2E < Test::Unit::TestCase
  include Algolia::Analytics
  def setup
    @client = Algolia::AnalyticsClient.create(
      ENV.fetch("ALGOLIA_APPLICATION_ID", nil),
      ENV.fetch("ALGOLIA_ADMIN_KEY", nil),
      "us"
    )
  end

  # e2e with complex query params
  def test_get_top_searches2
    res = @client.get_top_searches_with_http_info("cts_e2e_space in index")

    assert_equal(res.status, 200)
    res = @client.get_top_searches("cts_e2e_space in index")
    expected_body = JSON.parse("{\"searches\":[{\"search\":\"\",\"nbHits\":0}]}")
    assert_equal(expected_body, union(expected_body, JSON.parse(res.to_json)))
  end

end
