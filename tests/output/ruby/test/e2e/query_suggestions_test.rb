# Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be lost - read more on https://github.com/algolia/api-clients-automation. DO NOT EDIT.
require "algolia"
require "test/unit"
require "dotenv"

require_relative "../helpers"

Dotenv.load("../../.env")

class TestQuerySuggestionsClientE2E < Test::Unit::TestCase
  def setup
    @client = Algolia::QuerySuggestionsClient.create(
      ENV.fetch("ALGOLIA_APPLICATION_ID", nil),
      ENV.fetch("ALGOLIA_ADMIN_KEY", nil),
      "us"
    )
  end

  # Retrieve QS config e2e
  def test_get_config
    res = @client.get_config_with_http_info("cts_e2e_browse_query_suggestions")

    assert_equal(res.status, 200)
    res = @client.get_config("cts_e2e_browse_query_suggestions")
    expected_body = JSON.parse(
      "{\"appID\":\"T8JK9S7I7X\",\"allowSpecialCharacters\":true,\"enablePersonalization\":false,\"exclude\":[\"^cocaines$\"],\"indexName\":\"cts_e2e_browse_query_suggestions\",\"languages\":[],\"sourceIndices\":[{\"facets\":[{\"amount\":1,\"attribute\":\"title\"}],\"generate\":[[\"year\"]],\"indexName\":\"cts_e2e_browse\",\"minHits\":5,\"minLetters\":4,\"replicas\":false}]}"
    )
    assert_equal(expected_body, union(expected_body, JSON.parse(res.to_json)))
  end

end
