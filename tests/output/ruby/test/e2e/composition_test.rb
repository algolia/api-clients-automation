# Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be lost - read more on https://github.com/algolia/api-clients-automation. DO NOT EDIT.
require "algolia"
require "test/unit"
require "dotenv"

require_relative "../helpers"

Dotenv.load("../../.env")

class TestCompositionClientE2E < Test::Unit::TestCase
  def setup
    @client = Algolia::CompositionClient.create(
      ENV.fetch("METIS_APPLICATION_ID", nil),
      ENV.fetch("METIS_API_KEY", nil)
    )
  end

  # listCompositions
  def test_list_compositions1
    res = @client.list_compositions_with_http_info

    assert_equal(res.status, 200)
    res = @client.list_compositions
    expected_body = JSON.parse(
      "{\"items\":[{\"objectID\":\"id1\",\"name\":\"my first composition\",\"description\":\"the first ever composition from the client\",\"behavior\":{\"injection\":{\"main\":{\"source\":{\"search\":{\"index\":\"cts_e2e_small\"}}}}}}],\"nbPages\":1}"
    )
    assert_equal(expected_body, union(expected_body, JSON.parse(res.to_json)))
  end

end
