# Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be lost - read more on https://github.com/algolia/api-clients-automation. DO NOT EDIT.
require "algolia"
require "test/unit"
require "dotenv"

require_relative "../helpers"

Dotenv.load("../../.env")

class TestAbtestingClientE2E < Test::Unit::TestCase
  def setup
    @client = Algolia::AbtestingClient.create(
      ENV.fetch("ALGOLIA_APPLICATION_ID", nil),
      ENV.fetch("ALGOLIA_ADMIN_KEY", nil),
      "us"
    )
  end

  # listABTests with parameters
  def test_list_ab_tests1
    res = @client.list_ab_tests_with_http_info(0, 21, "cts_e2e ab", "t")

    assert_equal(res.status, 200)
    res = @client.list_ab_tests(0, 21, "cts_e2e ab", "t")
    expected_body = JSON.parse(
      "{\"abtests\":[{\"abTestID\":85635,\"createdAt\":\"2024-05-13T10:12:27.739233Z\",\"endAt\":\"2124-05-13T00:00:00Z\",\"name\":\"cts_e2e_abtest\",\"status\":\"active\",\"variants\":[{\"addToCartCount\":0,\"clickCount\":0,\"conversionCount\":0,\"description\":\"this abtest is used for api client automation tests and will expire in 2124\",\"index\":\"cts_e2e_search_facet\",\"purchaseCount\":0,\"trafficPercentage\":25},{\"addToCartCount\":0,\"clickCount\":0,\"conversionCount\":0,\"description\":\"\",\"index\":\"cts_e2e abtest\",\"purchaseCount\":0,\"trafficPercentage\":75}]}],\"count\":1,\"total\":1}"
    )
    assert_equal(expected_body, union(expected_body, JSON.parse(res.to_json)))
  end

end
