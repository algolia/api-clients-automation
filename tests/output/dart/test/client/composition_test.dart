// Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be lost - read more on https://github.com/algolia/api-clients-automation. DO NOT EDIT.
import 'package:algolia_client_composition/algolia_client_composition.dart';
import 'package:algolia_test/algolia_test.dart';
import 'package:test/test.dart';

void main() {
  test('calls api with correct read host', () async {
    final requester = RequestInterceptor();
    final client = CompositionClient(
        appId: "test-app-id",
        apiKey: "test-api-key",
        options: ClientOptions(requester: requester));
    requester.setOnRequest((request) {
      expect(request.host.url, "test-app-id-dsn.algolia.net");
    });
    try {
      final res = await client.search(
        compositionID: "test-composition-id",
        requestBody: RequestBody(),
      );
    } on InterceptionException catch (_) {
      // Ignore InterceptionException
    }
  });

  test('calls api with correct write host', () async {
    final requester = RequestInterceptor();
    final client = CompositionClient(
        appId: "test-app-id",
        apiKey: "test-api-key",
        options: ClientOptions(requester: requester));
    requester.setOnRequest((request) {
      expect(request.host.url, "test-app-id-dsn.algolia.net");
    });
    try {
      final res = await client.search(
        compositionID: "test-composition-id",
        requestBody: RequestBody(),
      );
    } on InterceptionException catch (_) {
      // Ignore InterceptionException
    }
  });
}
