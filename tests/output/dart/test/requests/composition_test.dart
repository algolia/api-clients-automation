// Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be lost - read more on https://github.com/algolia/api-clients-automation. DO NOT EDIT.
import 'package:algolia_client_composition/algolia_client_composition.dart';
import 'package:algolia_test/algolia_test.dart';
import 'package:test/test.dart';

void main() {
  // search
  test(
    'search',
    () => runTest(
      builder: (requester) => CompositionClient(
        appId: 'appId',
        apiKey: 'apiKey',
        options: ClientOptions(requester: requester),
      ),
      call: (client) => client.search(
        compositionID: "foo",
        requestBody: RequestBody(
          params: Params(
            query: "batman",
          ),
        ),
      ),
      intercept: (request) {
        expectPath(request.path, '/1/compositions/foo/run');
        expect(request.method, 'post');
        expectBody(request.body, """{"params":{"query":"batman"}}""");
      },
    ),
  );

  // searchForFacetValues
  test(
    'searchForFacetValues',
    () => runTest(
      builder: (requester) => CompositionClient(
        appId: 'appId',
        apiKey: 'apiKey',
        options: ClientOptions(requester: requester),
      ),
      call: (client) => client.searchForFacetValues(
        compositionID: "foo",
        facetName: "brand",
        searchForFacetValuesRequest: SearchForFacetValuesRequest(
          params: SearchForFacetValuesParams(
            maxFacetHits: 10,
          ),
        ),
      ),
      intercept: (request) {
        expectPath(request.path, '/1/compositions/foo/facets/brand/query');
        expect(request.method, 'post');
        expectBody(request.body, """{"params":{"maxFacetHits":10}}""");
      },
    ),
  );
}
