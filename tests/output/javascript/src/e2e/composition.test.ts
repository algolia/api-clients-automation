// Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be lost - read more on https://github.com/algolia/api-clients-automation. DO NOT EDIT.
import { describe, expect, test } from 'vitest';

import { union } from '../helpers.js';

import { compositionClient } from '@algolia/composition';

if (!process.env.METIS_APPLICATION_ID) {
  throw new Error('please provide an `METIS_APPLICATION_ID` env var for e2e tests');
}

if (!process.env.METIS_API_KEY) {
  throw new Error('please provide an `METIS_API_KEY` env var for e2e tests');
}

const client = compositionClient(process.env.METIS_APPLICATION_ID, process.env.METIS_API_KEY);

describe('listCompositions', () => {
  test('listCompositions', async () => {
    const resp = await client.listCompositions();

    const expectedBody = {
      items: [
        {
          objectID: 'id1',
          name: 'my first composition',
          description: 'the first ever composition from the client',
          behavior: { injection: { main: { source: { search: { index: 'cts_e2e_small' } } } } },
        },
      ],
      nbPages: 1,
    };

    expect(expectedBody).toEqual(union(expectedBody, resp));
  });
});
