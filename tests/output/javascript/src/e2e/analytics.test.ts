// Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be lost - read more on https://github.com/algolia/api-clients-automation. DO NOT EDIT.

import { analyticsClient } from '@algolia/client-analytics';
import * as dotenv from 'dotenv';

import { union } from '../helpers';

dotenv.config({ path: '../../.env' });

if (!process.env.ALGOLIA_APPLICATION_ID) {
  throw new Error(
    'please provide an `ALGOLIA_APPLICATION_ID` env var for e2e tests'
  );
}

if (!process.env.ALGOLIA_ADMIN_KEY) {
  throw new Error(
    'please provide an `ALGOLIA_ADMIN_KEY` env var for e2e tests'
  );
}

const client = analyticsClient(
  process.env.ALGOLIA_APPLICATION_ID,
  process.env.ALGOLIA_ADMIN_KEY,
  'us'
);

describe('getTopSearches', () => {
  test('e2e with complex query params', async () => {
    const resp = await client.getTopSearches({
      index: 'cts_e2e_space in index',
    });

    const expectedBody = { searches: [{ search: '', nbHits: 0 }] };

    expect(expectedBody).toEqual(union(expectedBody, resp));
  });
});
