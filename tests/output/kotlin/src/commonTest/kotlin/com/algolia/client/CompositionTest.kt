// Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be lost - read more on https://github.com/algolia/api-clients-automation. DO NOT EDIT.
package com.algolia.client

import com.algolia.client.api.CompositionClient
import com.algolia.client.configuration.*
import com.algolia.client.extensions.*
import com.algolia.client.model.composition.*
import com.algolia.client.model.composition.RequestBody
import com.algolia.client.transport.*
import com.algolia.utils.*
import io.ktor.http.*
import kotlinx.coroutines.test.*
import kotlinx.serialization.json.*
import kotlin.test.*

class CompositionTest {

  @Test
  fun `calls api with correct read host`() = runTest {
    val client = CompositionClient(appId = "test-app-id", apiKey = "test-api-key")
    client.runTest(
      call = {
        search(
          compositionID = "test-composition-id",
          requestBody = RequestBody(),
        )
      },
      intercept = {
        assertEquals("test-app-id-dsn.algolia.net", it.url.host)
      },
    )
  }

  @Test
  fun `calls api with correct write host`() = runTest {
    val client = CompositionClient(appId = "test-app-id", apiKey = "test-api-key")
    client.runTest(
      call = {
        search(
          compositionID = "test-composition-id",
          requestBody = RequestBody(),
        )
      },
      intercept = {
        assertEquals("test-app-id-dsn.algolia.net", it.url.host)
      },
    )
  }
}
