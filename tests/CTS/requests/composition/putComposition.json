[
  {
    "parameters": {
      "compositionID": "1234",
      "composition": {
        "objectID": "1234",
        "name": "my first composition",
        "behavior": {
          "injection": {
            "main": {
              "source": {
                "search": {
                  "index": "foo"
                }
              }
            },
            "injectedItems": [
              {
                "key": "my-unique-group-key",
                "source": {
                  "search": {
                    "index": "foo"
                  }
                },
                "position": 2,
                "length": 1
              }
            ]
          }
        }
      }
    },
    "request": {
      "path": "/1/compositions/1234",
      "method": "PUT",
      "body": {
        "objectID": "1234",
        "name": "my first composition",
        "behavior": {
          "injection": {
            "main": {
              "source": {
                "search": {
                  "index": "foo"
                }
              }
            },
            "injectedItems": [
              {
                "key": "my-unique-group-key",
                "source": {
                  "search": {
                    "index": "foo"
                  }
                },
                "position": 2,
                "length": 1
              }
            ]
          }
        }
      }
    }
  },
  {
    "parameters": {
      "compositionID": "my-external-injection-compo",
      "composition": {
        "objectID": "my-external-injection-compo",
        "name": "my first composition",
        "behavior": {
          "injection": {
            "main": {
              "source": {
                "search": {
                  "index": "foo"
                }
              }
            },
            "injectedItems": [
              {
                "key": "my-unique-external-group-key",
                "source": {
                  "external": {
                    "index": "foo",
                    "ordering": "userDefined",
                    "params": {
                      "filters": "brand:adidas"
                    }
                  }
                },
                "position": 2,
                "length": 1
              }
            ]
          }
        }
      }
    },
    "request": {
      "path": "/1/compositions/my-external-injection-compo",
      "method": "PUT",
      "body": {
        "objectID": "my-external-injection-compo",
        "name": "my first composition",
        "behavior": {
          "injection": {
            "main": {
              "source": {
                "search": {
                  "index": "foo"
                }
              }
            },
            "injectedItems": [
              {
                "key": "my-unique-external-group-key",
                "source": {
                  "external": {
                    "index": "foo",
                    "ordering": "userDefined",
                    "params": {
                      "filters": "brand:adidas"
                    }
                  }
                },
                "position": 2,
                "length": 1
              }
            ]
          }
        }
      }
    }
  },
  {
    "skipLanguages": ["kotlin"],
    "parameters": {
      "compositionID": "my-metadata-compo",
      "composition": {
        "objectID": "my-metadata-compo",
        "name": "my composition",
        "behavior": {
          "injection": {
            "main": {
              "source": {
                "search": {
                  "index": "foo",
                  "params": {
                    "filters": "brand:adidas"
                  }
                }
              }
            },
            "injectedItems": [
              {
                "key": "my-unique-group-key",
                "source": {
                  "search": {
                    "index": "foo",
                    "params": {
                      "filters": "brand:adidas"
                    }
                  }
                },
                "position": 2,
                "length": 1,
                "metadata": {
                  "hits": {
                    "addItemKey": true,
                    "extra": {
                      "my-string": "string",
                      "my-bool": true,
                      "my-number": 42,
                      "my-object": {
                        "sub-key": "sub-value"
                      }
                    }
                  }
                }
              },
              {
                "key": "my-unique-group-key",
                "source": {
                  "search": {
                    "index": "foo",
                    "params": {
                      "filters": "brand:puma"
                    }
                  }
                },
                "position": 5,
                "length": 5,
                "metadata": {
                  "hits": {
                    "addItemKey": true,
                    "extra": {
                      "my-string": "string",
                      "my-bool": true,
                      "my-number": 42,
                      "my-object": {
                        "sub-key": "sub-value"
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }
    },
    "request": {
      "path": "/1/compositions/my-metadata-compo",
      "method": "PUT",
      "body": {
        "objectID": "my-metadata-compo",
        "name": "my composition",
        "behavior": {
          "injection": {
            "main": {
              "source": {
                "search": {
                  "index": "foo",
                  "params": {
                    "filters": "brand:adidas"
                  }
                }
              }
            },
            "injectedItems": [
              {
                "key": "my-unique-group-key",
                "source": {
                  "search": {
                    "index": "foo",
                    "params": {
                      "filters": "brand:adidas"
                    }
                  }
                },
                "position": 2,
                "length": 1,
                "metadata": {
                  "hits": {
                    "addItemKey": true,
                    "extra": {
                      "my-string": "string",
                      "my-bool": true,
                      "my-number": 42,
                      "my-object": {
                        "sub-key": "sub-value"
                      }
                    }
                  }
                }
              },
              {
                "key": "my-unique-group-key",
                "source": {
                  "search": {
                    "index": "foo",
                    "params": {
                      "filters": "brand:puma"
                    }
                  }
                },
                "position": 5,
                "length": 5,
                "metadata": {
                  "hits": {
                    "addItemKey": true,
                    "extra": {
                      "my-string": "string",
                      "my-bool": true,
                      "my-number": 42,
                      "my-object": {
                        "sub-key": "sub-value"
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }
    }
  },
  {
    "parameters": {
      "compositionID": "my-compo",
      "composition": {
        "objectID": "my-compo",
        "name": "my composition",
        "behavior": {
          "injection": {
            "main": {
              "source": {
                "search": {
                  "index": "foo",
                  "params": {
                    "filters": "brand:adidas"
                  }
                }
              }
            },
            "injectedItems": [
              {
                "key": "my-unique-injected-item-key",
                "source": {
                  "search": {
                    "index": "foo"
                  }
                },
                "position": 2,
                "length": 1
              }
            ],
            "deduplication": {
              "positioning": "highest"
            }
          }
        }
      }
    },
    "request": {
      "path": "/1/compositions/my-compo",
      "method": "PUT",
      "body": {
        "objectID": "my-compo",
        "name": "my composition",
        "behavior": {
          "injection": {
            "main": {
              "source": {
                "search": {
                  "index": "foo",
                  "params": {
                    "filters": "brand:adidas"
                  }
                }
              }
            },
            "injectedItems": [
              {
                "key": "my-unique-injected-item-key",
                "source": {
                  "search": {
                    "index": "foo"
                  }
                },
                "position": 2,
                "length": 1
              }
            ],
            "deduplication": {
              "positioning": "highest"
            }
          }
        }
      }
    }
  },

  {
    "parameters": {
      "compositionID": "my-compo",
      "composition": {
        "objectID": "my-compo",
        "name": "my composition",
        "sortingStrategy": {
          "Price-asc": "products-low-to-high",
          "Price-desc": "products-high-to-low"
        },
        "behavior": {
          "injection": {
            "main": {
              "source": {
                "search": {
                  "index": "products"
                }
              }
            }
          }
        }
      }
    },
    "request": {
      "path": "/1/compositions/my-compo",
      "method": "PUT",
      "body": {
        "objectID": "my-compo",
        "name": "my composition",
        "sortingStrategy": {
          "Price-asc": "products-low-to-high",
          "Price-desc": "products-high-to-low"
        },
        "behavior": {
          "injection": {
            "main": {
              "source": {
                "search": {
                  "index": "products"
                }
              }
            }
          }
        }
      }
    }
  }
]
