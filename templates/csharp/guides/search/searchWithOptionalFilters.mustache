namespace Algolia;

using System;
using System.Text.Json;
using System.Net.Http;
using System.Collections.Generic;

{{> snippets/import}}

class SearchWithOptionalFilters {

  private static readonly List<string> labels = [/* Your labels */];

  private static OptionalFilters ReduceLabelsToFilters(List<string> labels)
  {
    return new OptionalFilters([]); // Implement your logic here
  }

  async Task Main(string[] args)
  {

    {{> snippets/init}}
    var optionalFilters = ReduceLabelsToFilters(labels);
    var searchParams = new SearchParams(new SearchParamsObject
    {
      Query = "<YOUR_SEARCH_QUERY>",
      OptionalFilters = optionalFilters
    });

    {{#dynamicSnippet}}searchWithSearchParams{{/dynamicSnippet}};
  }
}
