namespace Algolia;

using System;
using System.Text.Json;
using System.Net.Http;
using System.Collections.Generic;

{{> snippets/import}}

class SearchWithAnalyticsAndHeader {

  async Task Main(string[] args)
  {

    {{> snippets/init}}

    /*
    '94.228.178.246' should be replaced with your user's IP address.
    Depending on your stack there are multiple ways to get this information.
    */
    var ip = "94.228.178.246";
    var query = "query";

    var searchParams = new SearchParams(new SearchParamsObject { Query = query, Analytics = true });

    {{#dynamicSnippet}}searchWithSearchParamsAndForwardedHeader{{/dynamicSnippet}};
  }
}

