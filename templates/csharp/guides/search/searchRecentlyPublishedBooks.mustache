namespace Algolia;

using System;
using System.Text.Json;
using System.Net.Http;
using System.Collections.Generic;

{{> snippets/import}}

class SearchRecentlyPublishedBooks {

  async Task Main(string[] args)
  {

    {{> snippets/init}}
    var date = DateTime.UtcNow.AddYears(-1);
    var sTime = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
    var unixTime = (long)(date - sTime).TotalSeconds;
    var searchParams = new SearchParams(new SearchParamsObject
        {
            Query = "<YOUR_SEARCH_QUERY>",
            Filters = $"date_timestamp > {unixTime}"
        }
    );

    {{#dynamicSnippet}}searchWithSearchParams{{/dynamicSnippet}};
  }
}
