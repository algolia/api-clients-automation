{{> snippets/import}}

String getUserToken() {
  // Implement your logic here
  return "";
}

void abTestImplementationChecklist() async {
  {{> snippets/init}}

  // Set the searchParams and get the current user token
  final searchParams = SearchParamsObject(
    query: "User search query",
    enableABTest: true,
  );
  final userToken = getUserToken();

  // Is the user token anonymous?
  if (userToken.isEmpty || userToken == "YOUR_ANONYMOUS_USER_TOKEN") {
    // Disable A/B testing for this request
    searchParams.enableABTest = false;
  } else {
    // Set the user token to the current user token
    searchParams.userToken = userToken;
  }

  try {
    // Perform the searchSingleIndex
    final result = await {{#dynamicSnippet}}searchWithSearchParams{{/dynamicSnippet}};
    // SearchSingleIndex results
    print(result);
  } catch (err) {
    // SearchSingleIndex errors
    print(err);
  }
}
