//
// Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be lost - read more on https://github.com/algolia/api-clients-automation. DO NOT EDIT.
//

using System;
using System.Collections.Generic;
using Algolia.Search.Models;
using Algolia.Search.Transport;
using Algolia.Search.Utils;

namespace Algolia.Search.Clients
{
  /// <summary>
  /// Insights client configuration
  /// </summary>
  public sealed class InsightsConfig : AlgoliaConfig
  {
    /// <summary>
    /// The configuration of the Insights client
    /// A client should have it's own configuration ie on configuration per client instance
    /// </summary>
    /// <param name="applicationId">Your application ID</param>
    /// <param name="apiKey">Your API Key</param>
    /// <param name="region">Targeted region (optional)</param>
    public InsightsConfig(string applicationId, string apiKey, string region = null) : base(applicationId, apiKey)
    {
      DefaultHosts = GetDefaultHosts(region);
      Compression = CompressionType.NONE;
    }
    private static List<StatefulHost> GetDefaultHosts(string region)
    {
      var regions = new List<string> { "de", "us" };
      if (region != null && !regions.Contains(region))
      {
        throw new ArgumentException($"`region` must be one of the following {regions}");
      }

      var selectedRegion = region == null ? "insights.algolia.io" : "insights.{region}.algolia.io".Replace("{region}", region);

      List<StatefulHost> hosts = new List<StatefulHost>
    {
      new StatefulHost
      {
        Url = selectedRegion, Accept = CallType.Read | CallType.Write
      }
    };
      return hosts;
    }
  }
}
