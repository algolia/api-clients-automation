// swift-tools-version: 5.9
// Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be lost - read more on
// https://github.com/algolia/api-clients-automation. DO NOT EDIT.

import PackageDescription

var extraPackageDependencies: [Package.Dependency] = []
var extraTargetDependencies: [Target.Dependency] = []
var targets: [Target] = []
var products: [Product] = []

#if os(Linux)
    extraPackageDependencies.append(
        .package(url: "https://github.com/apple/swift-crypto.git", from: "3.2.0")
    )
    extraTargetDependencies.append(
        .product(name: "Crypto", package: "swift-crypto")
    )
#endif

extraTargetDependencies.append(contentsOf: [
    .product(name: "AnyCodable", package: "AnyCodable"),
    .product(name: "Logging", package: "swift-log"),
])

targets.append(contentsOf: [
    .target(
        name: "Core",
        dependencies: [
            .product(name: "Gzip", package: "GzipSwift"),
        ] + extraTargetDependencies,
        path: "Sources/Core"
    ),
])

[
    "Abtesting",
    "Analytics",
    "Ingestion",
    "Insights",
    "Monitoring",
    "Personalization",
    "QuerySuggestions",
    "Recommend",
    "Search",
].enumerated().forEach { _, library in
    targets.append(
        .target(
            name: library,
            dependencies: [
                .target(name: "Core"),
            ] + extraTargetDependencies,
            path: "Sources/\(library)"
        )
    )

    products.append(
        .library(
            name: "\(library)",
            targets: ["\(library)"]
        )
    )
}

let package = Package(
    name: "AlgoliaSearchClient",
    platforms: [
        .iOS(.v13),
        .macOS(.v10_15),
        .tvOS(.v13),
        .watchOS(.v6),
    ],
    products: products,
    dependencies: [
        .package(url: "https://github.com/Flight-School/AnyCodable", from: "0.6.7"),
        .package(url: "https://github.com/apple/swift-log.git", from: "1.5.4"),
        .package(url: "https://github.com/1024jp/GzipSwift", from: "6.0.1"),
    ] + extraPackageDependencies,
    targets: targets
)
