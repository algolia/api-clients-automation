package composition

// Code generated by OpenAPI Generator (https://openapi-generator.tech), manual changes will be lost - read more on https://github.com/algolia/api-clients-automation. DO NOT EDIT.

import (
	"encoding/json"
	"fmt"
)

// AroundRadius - Maximum radius for a search around a central location.  This parameter works in combination with the `aroundLatLng` and `aroundLatLngViaIP` parameters. By default, the search radius is determined automatically from the density of hits around the central location. The search radius is small if there are many hits close to the central coordinates.
type AroundRadius struct {
	AroundRadiusAll *AroundRadiusAll
	Int             *int
}

// intAsAroundRadius is a convenience function that returns int wrapped in AroundRadius.
func IntAsAroundRadius(v int) *AroundRadius {
	return &AroundRadius{
		Int: &v,
	}
}

// AroundRadiusAllAsAroundRadius is a convenience function that returns AroundRadiusAll wrapped in AroundRadius.
func AroundRadiusAllAsAroundRadius(v AroundRadiusAll) *AroundRadius {
	return &AroundRadius{
		AroundRadiusAll: &v,
	}
}

// Unmarshal JSON data into one of the pointers in the struct.
func (dst *AroundRadius) UnmarshalJSON(data []byte) error {
	var err error
	// try to unmarshal data into Int
	err = json.Unmarshal(data, &dst.Int)
	if err == nil {
		return nil // found the correct type
	} else {
		dst.Int = nil
	}
	// try to unmarshal data into AroundRadiusAll
	err = json.Unmarshal(data, &dst.AroundRadiusAll)
	if err == nil {
		return nil // found the correct type
	} else {
		dst.AroundRadiusAll = nil
	}

	return fmt.Errorf("data failed to match schemas in oneOf(AroundRadius)")
}

// Marshal data from the first non-nil pointers in the struct to JSON.
func (src AroundRadius) MarshalJSON() ([]byte, error) {
	if src.AroundRadiusAll != nil {
		serialized, err := json.Marshal(&src.AroundRadiusAll)
		if err != nil {
			return nil, fmt.Errorf("failed to unmarshal one of AroundRadiusAll of AroundRadius: %w", err)
		}

		return serialized, nil
	}

	if src.Int != nil {
		serialized, err := json.Marshal(&src.Int)
		if err != nil {
			return nil, fmt.Errorf("failed to unmarshal one of Int of AroundRadius: %w", err)
		}

		return serialized, nil
	}

	return nil, nil // no data in oneOf schemas
}

// Get the actual instance.
func (obj AroundRadius) GetActualInstance() any {
	if obj.AroundRadiusAll != nil {
		return *obj.AroundRadiusAll
	}

	if obj.Int != nil {
		return *obj.Int
	}

	// all schemas are nil
	return nil
}
